/*! For license information please see main.966b2270.chunk.js.LICENSE.txt */
(this["webpackJsonptest-react"]=this["webpackJsonptest-react"]||[]).push([[0],{38:function(e,t,n){},40:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n(2),r=n.n(c),i=n(16),o=n.n(i),s=(n(38),n(18)),d=n.n(s),u=n(25),l=n(24),j=n(14),b=(n(40),n(28));b.a.initializeApp({apiKey:"AIzaSyD6DnGbVfdJlDJ_pEOUfDfTDJrA8j3lIs8",authDomain:"dv-inventory.firebaseapp.com",databaseURL:"https://dv-inventory.firebaseio.com",projectId:"dv-inventory",storageBucket:"dv-inventory.appspot.com",messagingSenderId:"130062240176",appId:"1:130062240176:web:ecbca5d29b37d25c6cee75"});var f=b.a,p=n(53),h=r.a.createContext(),v=n(32);var m=function e(t){var n=t.item,r=t.headElement,i=Object(c.useContext)(h),o=i.active,s=i.setActive,d=Object(c.useState)(!1),u=Object(j.a)(d,2),l=u[0],b=u[1],f={child:{margin:"0.5rem 0 0.5rem 2rem",display:"flex",flexDirection:"column"},button:{width:"100%",color:n.id==o.id||l?"white":r?"black":void 0!==n.parts?"#404040":"gray",fontWeight:r?"bold":"normal"}};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[!r&&Object(a.jsx)(v.a,{size:"2rem",color:"gray"}),Object(a.jsx)(p.a,{onMouseEnter:function(){return b((function(e){return!e}))},onMouseLeave:function(){return b((function(e){return!e}))},className:"elements",style:f.button,variant:n.id==o.id?"secondary":r?"outline-dark":"outline-secondary",onClick:function(){return s(n.id==o.id?{}:n)},children:n.name})]}),Object(a.jsx)("div",{style:f.child,children:n.parts?n.parts.map((function(t){return Object(a.jsx)(e,{item:t},t.id)})):null})]})},O={mainLeft:{display:"flex",flexDirection:"column"}};var x=function(e){var t=e.data;return Object(a.jsx)("div",{style:O.maimLeft,children:t?t.map((function(e){return Object(a.jsx)(m,{headElement:!0,item:e},e.id)})):null})};function g(){return Object(a.jsx)("div",{style:{display:"flex",justifyContent:"center",magin:".5rem"},children:Object(a.jsxs)("div",{className:"lds-ring",children:[Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{})]})})}n(44);var y=n(52),w=n(51),D=n(54);function I(e){var t=e.data,n=e.changeData,r=e.adding,i=Object(c.useState)(!1),o=Object(j.a)(i,2),s=o[0],d=o[1],u=function(){h(t.data.name),x(t.data.count),d(!1)},l=Object(c.useState)(t.data.name),b=Object(j.a)(l,2),f=b[0],h=b[1],v=Object(c.useState)(t.data.count),m=Object(j.a)(v,2),O=m[0],x=m[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(p.a,{style:{marginTop:".5rem"},variant:r?"info":"light",onClick:function(){return d(!0)},children:r?"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c":f}),Object(a.jsxs)(y.a,{show:s,onHide:u,children:[Object(a.jsx)(y.a.Header,{closeButton:!0,children:Object(a.jsx)(y.a.Title,{children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(a.jsxs)(y.a.Body,{children:[Object(a.jsxs)(w.a,{className:"mb-3",children:[Object(a.jsx)(w.a.Prepend,{children:Object(a.jsx)(w.a.Text,{id:"name",children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})}),Object(a.jsx)(D.a,{disabled:!r,value:f,onChange:function(e){return h(e.target.value)},"aria-describedby":"name"})]}),Object(a.jsxs)(w.a,{className:"mb-3",children:[Object(a.jsx)(w.a.Prepend,{children:Object(a.jsx)(w.a.Text,{id:"count",children:"\u041a\u043e\u043b\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"})}),Object(a.jsx)(D.a,{type:"number",value:O,onChange:function(e){return x(e.target.value)},"aria-describedby":"count"})]})]}),Object(a.jsxs)(y.a.Footer,{children:[t.id&&Object(a.jsx)(p.a,{variant:"danger",onClick:function(){console.log(t),console.log(t.id),n({type:"delUnit",obj:t.id}),d(!1)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(a.jsx)(p.a,{variant:"secondary",onClick:u,children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}),Object(a.jsx)(p.a,{variant:"primary",onClick:function(){t.data.name===f&&t.data.count===O||n({type:t.id?"changeUnit":"addUnit",obj:{name:f,count:O,id:t.id,placeId:t.placeId}}),d(!1)},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"})]})]})]})}var k={maimLeft:{display:"flex",flexDirection:"column",width:"100%"},tech:{marginTop:".5rem"}};var E=function(e){var t=e.data,n=e.changeTechs,r=e.active,i=Object(c.useState)(void 0),o=Object(j.a)(i,2);return o[0],o[1],Object(a.jsxs)("div",{style:k.maimLeft,children:[t?t.map((function(e){return Object(a.jsx)(I,{changeData:function(e){return n(e)},data:e},e.id)})):null,!r.id||r.parts?null:Object(a.jsx)(I,{changeData:function(e){return n(e)},data:{placeId:r.id,data:{id:void 0,name:"",count:1}},adding:!0})]})},C=function(e,t){switch(t.type){case"addUnit":return console.log(e),e.push({data:{count:t.obj.count,name:t.obj.name},placeId:t.obj.placeId}),e;case"delUnit":return e.filter((function(e){return console.log(e.id,t.obj),!(e.id===t.obj)}));case"changeUnit":return console.log(e),e.map((function(e){return e.id==t.obj.id&&(e.data.name=t.obj.name,e.data.count=t.obj.count),e}));case"init":return t.data;default:return e}};var S=function(){var e=Object(c.useState)(!0),t=Object(j.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)([]),o=Object(j.a)(i,2),s=o[0],b=o[1],p=Object(c.useState)(0),v=Object(j.a)(p,2),m=v[0],O=v[1],y=Object(c.useState)({}),w=Object(j.a)(y,2),D=w[0],I=w[1],k=Object(c.useReducer)(C,[]),S=Object(j.a)(k,2),U=S[0],T=S[1],L={active:D,setActive:function(e){return I(e)}};function F(e,t){var n=e;return n.forEach((function(e,a){e.parts&&e.parts.forEach((function(e,c){t.forEach((function(r){if(r.id===e){var i=[];i.push(r),r.parts&&(i=F(i,t)),n[a].parts[c]=i[0]}}))}))})),n}function N(){return(N=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.firestore().collection("places").get().then((function(e){return e.docs.map((function(e){return{id:e.id,name:e.data().name,parts:e.data().parts&&e.data().parts.map((function(e){return e.id}))}}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.firestore().collection("inventory").get().then((function(e){var t=e.docs.map((function(e){var t;return{id:e.id,data:e.data(),placeId:e.data().place?null===(t=e.data().place)||void 0===t?void 0:t.id:void 0}}));return console.log(t),t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){(function(){return N.apply(this,arguments)})().then((function(e){var t=function(e){var t=[];return e.forEach((function(n){var a=!0;e.forEach((function(e){void 0!==e.parts&&e.parts.forEach((function(e){e===n.id&&(a=!1)}))})),a&&t.push(n)})),t}(e);t=F(t,e),b(t),r(!1)})),function(){return A.apply(this,arguments)}().then((function(e){T({type:"init",data:e})}))}),[m]);var B=function(){var e=Object(l.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next="addUnit"===e.t0?3:"delUnit"===e.t0?8:"changeUnit"===e.t0?11:14;break;case 3:return console.log("add"),e.next=6,f.firestore().collection("inventory").doc().set({name:t.obj.name,count:t.obj.count,place:f.firestore().collection("places").doc(t.obj.placeId)}).then((function(){console.info("Done"),T(t)}));case 6:return O((function(e){return e+1})),e.abrupt("return");case 8:return e.next=10,f.firestore().collection("inventory").doc(t.obj).delete().then((function(){console.info("Done"),T(t)}));case 10:return e.abrupt("return");case 11:return console.log(t.obj.id,"!!!!!!!!!!"),T(t),e.abrupt("return");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"main",children:[n?Object(a.jsx)(g,{}):s?Object(a.jsx)("div",{className:"wrapper",children:Object(a.jsx)(h.Provider,{value:L,children:Object(a.jsx)(x,{data:s})})}):Object(a.jsx)("h1",{children:"\u0417\u0434\u0430\u043d\u0438\u044f \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442"}),Object(a.jsx)("div",{className:"wrapper",children:Object(a.jsx)(E,{data:function e(t){if(t.id){var n=[];U.forEach((function(e){e.placeId==t.id&&n.push(e)}));var a=[];return t.parts&&t.parts.forEach((function(t){a=[].concat(Object(u.a)(a),Object(u.a)(e(t)))})),[].concat(n,Object(u.a)(a))}}(D),active:D,changeTechs:B})})]})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,55)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(S,{})}),document.getElementById("root")),U()}},[[49,1,2]]]);
//# sourceMappingURL=main.966b2270.chunk.js.map