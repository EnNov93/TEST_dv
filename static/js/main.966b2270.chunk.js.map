{"version":3,"sources":["firebase.js","context.js","components/OneItem.js","components/ItemsList.js","components/Loader.js","components/Modal.js","components/Techs.js","reducer.js","App.js","reportWebVitals.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","Context","React","createContext","OneItem","item","headElement","useContext","active","setActive","useState","hover","setHover","styles","child","margin","display","flexDirection","button","width","color","id","undefined","parts","fontWeight","style","size","Button","onMouseEnter","prev","onMouseLeave","className","variant","onClick","name","map","el","mainLeft","ItemsList","data","maimLeft","element","Loader","justifyContent","magin","MyModal","changeData","adding","show","setShow","handleClose","setName","setCount","count","marginTop","Modal","onHide","Header","closeButton","Title","Body","InputGroup","Prepend","Text","FormControl","disabled","value","onChange","e","target","aria-describedby","type","Footer","console","log","obj","placeId","tech","Techs","changeTechs","act","state","action","push","filter","App","loading","setLoading","nodes","setNodes","costilRender","setCostilRender","useReducer","reducer","techs","ActivContext","val","findNodesParts","headNodes","arr","forEach","key","kp","elN","a","firestore","collection","get","then","response","docs","x","part","place","useEffect","getfirebaseHouse","f","itemI","getHeadNodes","getfirebaseTechs","handleChT","doc","set","info","delete","Provider","getActiveTechs","arr2","elem","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":";6QAYAA,IAASC,cAVM,CACXC,OAAQ,0CACRC,WAAY,+BACZC,YAAa,sCACbC,UAAW,eACXC,cAAe,2BACfC,kBAAmB,eACnBC,MAAO,8CAIIR,QAAf,E,QCVeS,EAFCC,IAAMC,gB,QCwDPC,MAjDf,SAASA,EAAT,GAAyC,IAAtBC,EAAqB,EAArBA,KAAMC,EAAe,EAAfA,YAAe,EACRC,qBAAWN,GAAjCO,EAD8B,EAC9BA,OAAQC,EADsB,EACtBA,UADsB,EAEZC,oBAAS,GAFG,mBAE/BC,EAF+B,KAExBC,EAFwB,KAGhCC,EAAS,CACbC,MAAO,CACLC,OAAQ,uBACRC,QAAS,OACTC,cAAe,UAEjBC,OAAQ,CACNC,MAAO,OACPC,MAAOf,EAAKgB,IAAMb,EAAOa,IAAIV,EAAQ,QAAUL,EAAc,aAC1CgB,IAAfjB,EAAKkB,MAAsB,UACzB,OAAQC,WAAYlB,EAAc,OAAS,WAKrD,OACE,qCACE,sBAAKmB,MAAO,CAAET,QAAS,OAAQC,cAAe,OAA9C,WACIX,GAAe,cAAC,IAAD,CAAoBoB,KAAK,OAAON,MAAM,SACvD,cAACO,EAAA,EAAD,CACEC,aAAc,kBAAIhB,GAAS,SAAAiB,GAAI,OAAYA,MAC3CC,aAAc,kBAAIlB,GAAS,SAAAiB,GAAI,OAAYA,MAC3CE,UAAW,WACXN,MAAOZ,EAAOK,OACdc,QACE3B,EAAKgB,IAAMb,EAAOa,GACd,YACAf,EAAc,eAAiB,oBAErC2B,QAAS,kBAAMxB,EAAUJ,EAAKgB,IAAMb,EAAOa,GAAK,GAAKhB,IAVvD,SAYGA,EAAK6B,UAIV,qBAAKT,MAAOZ,EAAOC,MAAnB,SACGT,EAAKkB,MAAQlB,EAAKkB,MAAMY,KAAI,SAACC,GAAD,OAC3B,cAAChC,EAAD,CAAqBC,KAAM+B,GAAbA,EAAGf,OACd,WC5CPR,EAAS,CACbwB,SAAU,CACRrB,QAAS,OACTC,cAAe,WAsBJqB,MAlBf,YAA8B,IAATC,EAAQ,EAARA,KACnB,OACE,qBAAKd,MAAOZ,EAAO2B,SAAnB,SACGD,EAAMA,EAAKJ,KAAI,SAACM,GAAD,OACd,cAAC,EAAD,CACEnC,aAAa,EAEbD,KAAMoC,GADDA,EAAQpB,OAGZ,QCnBI,SAASqB,IAEtB,OACE,qBAAKjB,MAAO,CAAET,QAAS,OAAQ2B,eAAgB,SAAUC,MAAO,SAAhE,SACE,sBAAKb,UAAU,WAAf,UAA0B,wBAAW,wBAAW,wBAAW,6B,kCCFlD,SAASc,EAAT,GAAgD,IAA7BN,EAA4B,EAA5BA,KAAMO,EAAsB,EAAtBA,WAAYC,EAAU,EAAVA,OAAU,EACpCrC,oBAAS,GAD2B,mBACrDsC,EADqD,KAC/CC,EAD+C,KAGtDC,EAAc,WAClBC,EAAQZ,EAAKA,KAAKL,MAClBkB,EAASb,EAAKA,KAAKc,OACnBJ,GAAQ,IANkD,EAuBpCvC,mBAAS6B,EAAKA,KAAKL,MAvBiB,mBAuBrDA,EAvBqD,KAuB/CiB,EAvB+C,OAwBlCzC,mBAAS6B,EAAKA,KAAKc,OAxBe,mBAwBrDA,EAxBqD,KAwB9CD,EAxB8C,KA0B5D,OACE,qCACE,cAACzB,EAAA,EAAD,CACEF,MAAO,CAAE6B,UAAW,SACpBtB,QAASe,EAAO,OAAS,QACzBd,QAtBa,kBAAMgB,GAAQ,IAmB7B,SAIGF,EAAQ,mDAAab,IAGxB,eAACqB,EAAA,EAAD,CAAOP,KAAMA,EAAMQ,OAAQN,EAA3B,UACE,cAACK,EAAA,EAAME,OAAP,CAAcC,aAAW,EAAzB,SACE,cAACH,EAAA,EAAMI,MAAP,qGAEF,eAACJ,EAAA,EAAMK,KAAP,WACE,eAACC,EAAA,EAAD,CAAY9B,UAAU,OAAtB,UACE,cAAC8B,EAAA,EAAWC,QAAZ,UACE,cAACD,EAAA,EAAWE,KAAZ,CAAiB1C,GAAG,OAApB,wFAEF,cAAC2C,EAAA,EAAD,CAAaC,UAAWlB,EAAQmB,MAAOhC,EAAMiC,SAAU,SAACC,GAAD,OAAOjB,EAAQiB,EAAEC,OAAOH,QAAQI,mBAAiB,YAE1G,eAACT,EAAA,EAAD,CAAY9B,UAAU,OAAtB,UACE,cAAC8B,EAAA,EAAWC,QAAZ,UACE,cAACD,EAAA,EAAWE,KAAZ,CAAiB1C,GAAG,QAApB,kFAEF,cAAC2C,EAAA,EAAD,CAAaO,KAAK,SAASL,MAAOb,EAAOc,SAAU,SAACC,GAAD,OAAOhB,EAASgB,EAAEC,OAAOH,QAAQI,mBAAiB,gBAGzG,eAACf,EAAA,EAAMiB,OAAP,WACGjC,EAAKlB,IAAM,cAACM,EAAA,EAAD,CAAQK,QAAQ,SAASC,QA5CxB,WACnBwC,QAAQC,IAAInC,GACZkC,QAAQC,IAAInC,EAAKlB,IACjByB,EAAW,CAAEyB,KAAM,UAAWI,IAAKpC,EAAKlB,KACxC4B,GAAQ,IAwCU,wDAGZ,cAACtB,EAAA,EAAD,CAAQK,QAAQ,YAAYC,QAASiB,EAArC,wDAGA,cAACvB,EAAA,EAAD,CAAQK,QAAQ,UAAUC,QA5Cf,WACbM,EAAKA,KAAKL,OAASA,GAAQK,EAAKA,KAAKc,QAAUA,GACjDP,EAAW,CAAEyB,KAAMhC,EAAKlB,GAAI,aAAe,UAAWsD,IAAK,CAAEzC,KAAMA,EAAMmB,MAAOA,EAAOhC,GAAIkB,EAAKlB,GAAIuD,QAASrC,EAAKqC,WAEpH3B,GAAQ,IAwCF,oICzDV,IAAMpC,EAAS,CACb2B,SAAU,CACRxB,QAAS,OACTC,cAAe,SACfE,MAAO,QAET0D,KAAM,CACJvB,UAAW,UA4CAwB,MAxCf,YAA+C,IAA9BvC,EAA6B,EAA7BA,KAAMwC,EAAuB,EAAvBA,YAAavE,EAAU,EAAVA,OAAU,EACpBE,wBAASY,GADW,mBAG5C,OAH4C,UAI1C,sBAAKG,MAAOZ,EAAO2B,SAAnB,UAEGD,EAAOA,EAAKJ,KAAI,SAACC,GAAD,OACf,cAACS,EAAD,CAEEC,WAAY,SAACkC,GAAD,OAASD,EAAYC,IACjCzC,KAAMH,GAFDA,EAAGf,OAKP,MAGDb,EAAOa,IAAQb,EAAOe,MAAU,KAElC,cAACsB,EAAD,CACEC,WAAY,SAACkC,GAAD,OAASD,EAAYC,IACjCzC,KAAM,CACJqC,QAASpE,EAAOa,GAChBkB,KAAM,CACJlB,QAAIC,EACJY,KAAM,GACNmB,MAAO,IAIXN,QAAQ,QC/CH,WAAUkC,EAAOC,GAE9B,OAAQA,EAAOX,MACb,IAAK,UASH,OARAE,QAAQC,IAAIO,GACZA,EAAME,KAAK,CACT5C,KAAM,CACJc,MAAO6B,EAAOP,IAAItB,MAClBnB,KAAMgD,EAAOP,IAAIzC,MAEnB0C,QAASM,EAAOP,IAAIC,UAEfK,EAET,IAAK,UAOH,OALUA,EAAMG,QAAO,SAAAhD,GAErB,OADAqC,QAAQC,IAAItC,EAAGf,GAAI6D,EAAOP,OACjBvC,EAAGf,KAAO6D,EAAOP,QAK9B,IAAK,aAUH,OARAF,QAAQC,IAAIO,GACFA,EAAM9C,KAAI,SAAAC,GAKlB,OAJIA,EAAGf,IAAM6D,EAAOP,IAAItD,KACtBe,EAAGG,KAAKL,KAAOgD,EAAOP,IAAIzC,KAC1BE,EAAGG,KAAKc,MAAQ6B,EAAOP,IAAItB,OAEtBjB,KAIX,IAAK,OAEH,OAAO8C,EAAO3C,KAEhB,QACE,OAAO0C,IC6KEI,MA3Mf,WAAgB,IAAD,EAKiB3E,oBAAS,GAL1B,mBAKN4E,EALM,KAKGC,EALH,OAMa7E,mBAAS,IANtB,mBAMN8E,EANM,KAMCC,EAND,OAO2B/E,mBAAS,GAPpC,mBAONgF,EAPM,KAOQC,EAPR,OASejF,mBAAS,IATxB,mBASNF,EATM,KASEC,EATF,OAYgBmF,qBAAWC,EAAS,IAZpC,mBAYNC,EAZM,KAYCf,EAZD,KAcPgB,EAAe,CACnBvF,OAAQA,EACRC,UAAW,SAACuF,GAAD,OAASvF,EAAUuF,KAuBhC,SAASC,EAAeC,EAAWV,GACjC,IAAIW,EAAMD,EAoBV,OAnBAC,EAAIC,SAAQ,SAAC3D,EAAS4D,GAChB5D,EAAQlB,OACVkB,EAAQlB,MAAM6E,SAAQ,SAAChE,EAAIkE,GACzBd,EAAMY,SAAQ,SAACG,GACb,GAAIA,EAAIlF,KAAOe,EAAI,CAEjB,IAAIoE,EAAI,GACRA,EAAErB,KAAKoB,GACHA,EAAIhF,QACNiF,EAAIP,EAAeO,EAAGhB,IAGxBW,EAAIE,GAAK9E,MAAM+E,GAAME,EAAE,aAO1BL,EA5DI,4CA+Db,sBAAAK,EAAA,sEACehH,EAASiH,YAAYC,WAAW,UAAUC,MACpDC,MAAK,SAACC,GAML,OALWA,EAASC,KAAK3E,KAAI,SAAC4E,GAAD,MAAQ,CACnC1F,GAAI0F,EAAE1F,GACNa,KAAM6E,EAAExE,OAAOL,KACfX,MAAOwF,EAAExE,OAAOhB,OAASwF,EAAExE,OAAOhB,MAAMY,KAAI,SAAC6E,GAAD,OAAUA,EAAK3F,aANnE,oFA/Da,kEA0Eb,sBAAAmF,EAAA,sEACehH,EAASiH,YAAYC,WAAW,aAAaC,MACvDC,MAAK,SAAAC,GACJ,IAAIC,EAAOD,EAASC,KAAK3E,KAAI,SAAA4E,GAAM,IAAD,EAChC,MAAO,CACL1F,GAAI0F,EAAE1F,GACNkB,KAAMwE,EAAExE,OACRqC,QAASmC,EAAExE,OAAO0E,MAAT,UAAiBF,EAAExE,OAAO0E,aAA1B,aAAiB,EAAgB5F,QAAKC,MAInD,OADAmD,QAAQC,IAAIoC,GACLA,KAXb,oFA1Ea,sBA0GbI,qBAAU,YA1GG,2CAoHXC,GAAmBP,MAAK,SAACE,GACvB,IAAIvE,EAhGR,SAAsBiD,GACpB,IAAIW,EAAM,GAcV,OAbAX,EAAMY,SAAQ,SAAC/F,GACb,IAAI+G,GAAI,EACR5B,EAAMY,SAAQ,SAACiB,QACO/F,IAAhB+F,EAAM9F,OACR8F,EAAM9F,MAAM6E,SAAQ,SAAChE,GACfA,IAAO/B,EAAKgB,KACd+F,GAAI,SAKRA,GAAGjB,EAAIhB,KAAK9E,MAEX8F,EAiFMmB,CAAaR,GACxBvE,EAAO0D,EAAe1D,EAAMuE,GAC5BrB,EAASlD,GACTgD,GAAW,MAxHF,0CA0HXgC,GAAmBX,MAAK,SAACE,GACvB/B,EAAY,CAAER,KAAM,OAAQhC,KAAMuE,SAEnC,CAACpB,IAEJ,IAAM8B,EAAS,uCAAG,WAAOtC,GAAP,SAAAsB,EAAA,2DACRtB,EAAOX,KADC,OAcT,YAdS,OA4BT,YA5BS,OAmCT,eAnCS,+BAeZE,QAAQC,IAAI,OAfA,SAgBNlF,EAASiH,YAAYC,WAAW,aAAae,MAAMC,IAAI,CAC3DxF,KAAMgD,EAAOP,IAAIzC,KACjBmB,MAAO6B,EAAOP,IAAItB,MAClB4D,MAAOzH,EAASiH,YAAYC,WAAW,UAAUe,IAAIvC,EAAOP,IAAIC,WAC/DgC,MAAK,WACNnC,QAAQkD,KAAK,QACb5C,EAAYG,MAtBF,cAwBZS,GAAgB,SAAA9D,GAAI,OAAKA,EAAO,KAxBpB,2CA6BNrC,EAASiH,YAAYC,WAAW,aAAae,IAAIvC,EAAOP,KAAKiD,SAAShB,MAAK,WAC/EnC,QAAQkD,KAAK,QACb5C,EAAYG,MA/BF,iDAuCZT,QAAQC,IAAIQ,EAAOP,IAAItD,GAAI,cAQ3B0D,EAAYG,GA/CA,+DAAH,sDAwDf,OACE,sBAAKnD,UAAU,OAAf,UACGuD,EACC,cAAC5C,EAAD,IACE8C,EACF,qBAAKzD,UAAU,UAAf,SACE,cAAC,EAAQ8F,SAAT,CAAkB3D,MAAO6B,EAAzB,SACE,cAAC,EAAD,CAAWxD,KAAMiD,QAIjB,yIAEN,qBAAKzD,UAAU,UAAf,SACE,cAAC,EAAD,CAAOQ,KA3Gb,SAASuF,EAAe9C,GACtB,GAAIA,EAAI3D,GAAI,CACV,IAAI8E,EAAM,GACVL,EAAMM,SAAQ,SAAChE,GACTA,EAAGwC,SAAWI,EAAI3D,IAAI8E,EAAIhB,KAAK/C,MAErC,IAAI2F,EAAO,GAMX,OALI/C,EAAIzD,OACNyD,EAAIzD,MAAM6E,SAAQ,SAAA4B,GAChBD,EAAI,sBAAOA,GAAP,YAAgBD,EAAeE,QAGjC,GAAN,OAAW7B,EAAX,YAAmB4B,KA+FJD,CAAetH,GAASA,OAAQA,EAAQuE,YAAayC,UCnM3DS,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBvB,MAAK,YAAkD,IAA/CwB,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAG1BZ,M","file":"static/js/main.966b2270.chunk.js","sourcesContent":["import firebase from 'firebase'\r\n\r\nconst config = {\r\n    apiKey: \"AIzaSyD6DnGbVfdJlDJ_pEOUfDfTDJrA8j3lIs8\",\r\n    authDomain: \"dv-inventory.firebaseapp.com\",\r\n    databaseURL: \"https://dv-inventory.firebaseio.com\",\r\n    projectId: \"dv-inventory\",\r\n    storageBucket: \"dv-inventory.appspot.com\",\r\n    messagingSenderId: \"130062240176\",\r\n    appId: \"1:130062240176:web:ecbca5d29b37d25c6cee75\"\r\n};\r\n\r\nfirebase.initializeApp(config);\r\nexport default firebase;","import React from 'react'\r\nconst Context = React.createContext()\r\n\r\nexport default Context","import React, { useContext, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport Context from \"../context\";\r\nimport { BsArrowReturnRight } from \"react-icons/bs\";\r\n\r\n\r\n\r\nfunction OneItem({ item, headElement }) {\r\n  const { active, setActive } = useContext(Context);\r\n  const [hover, setHover] = useState(false)\r\n  const styles = {\r\n    child: {\r\n      margin: \"0.5rem 0 0.5rem 2rem\",\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n    },\r\n    button: {\r\n      width: \"100%\",\r\n      color: item.id == active.id||hover ? 'white' : headElement ? 'black'\r\n        : item.parts !== undefined ? '#404040'\r\n          : 'gray', fontWeight: headElement ? 'bold' : 'normal'\r\n    }\r\n  };\r\n\r\n\r\n  return (\r\n    <>\r\n      <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n        {!headElement && <BsArrowReturnRight size='2rem' color='gray' />}\r\n        <Button\r\n          onMouseEnter={()=>setHover(prev => prev = !prev)}\r\n          onMouseLeave={()=>setHover(prev => prev = !prev)}\r\n          className={'elements'}\r\n          style={styles.button}\r\n          variant={\r\n            item.id == active.id\r\n              ? \"secondary\"\r\n              : headElement ? \"outline-dark\" : \"outline-secondary\"\r\n          }\r\n          onClick={() => setActive(item.id == active.id ? {} : item)}\r\n        >\r\n          {item.name}\r\n        </Button>\r\n      </div>\r\n\r\n      <div style={styles.child}>\r\n        {item.parts ? item.parts.map((el) => (\r\n          <OneItem key={el.id} item={el}></OneItem>\r\n        )) : null}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\n// OneItem.propTypes = {};\r\n\r\nexport default OneItem;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport OneItem from \"./OneItem\";\r\nimport { Badge } from \"react-bootstrap\";\r\n\r\nconst styles = {\r\n  mainLeft: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n  },\r\n};\r\n\r\nfunction ItemsList({ data }) {\r\n  return (\r\n    <div style={styles.maimLeft}>\r\n      {data? data.map((element) => (\r\n        <OneItem\r\n          headElement={true}\r\n          key={element.id}\r\n          item={element}\r\n        />\r\n      )) : null}\r\n    </div>\r\n  );\r\n}\r\n\r\nItemsList.propTypes = {\r\n  data: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default ItemsList;\r\n","import React from \"react\";\r\n\r\nexport default function Loader() {\r\n\r\n  return (\r\n    <div style={{ display: \"flex\", justifyContent: \"center\", magin: \".5rem\" }}>\r\n      <div className=\"lds-ring\"><div></div><div></div><div></div><div></div></div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Button, Modal, InputGroup, FormControl } from \"react-bootstrap\";\r\n\r\n\r\nexport default function MyModal({ data, changeData, adding }) {\r\n  const [show, setShow] = useState(false);\r\n\r\n  const handleClose = () => {\r\n    setName(data.data.name)\r\n    setCount(data.data.count)\r\n    setShow(false)\r\n  };\r\n\r\n  const handleShow = () => setShow(true);\r\n  const handleRemove = () => {\r\n    console.log(data)\r\n    console.log(data.id)\r\n    changeData({ type: 'delUnit', obj: data.id })\r\n    setShow(false);\r\n  }\r\n  const handleSave = () => {\r\n    if (data.data.name !== name || data.data.count !== count) {\r\n      changeData({ type: data.id? 'changeUnit' : 'addUnit', obj: { name: name, count: count, id: data.id, placeId: data.placeId } })\r\n    }\r\n    setShow(false);\r\n  }\r\n\r\n  const [name, setName] = useState(data.data.name)\r\n  const [count, setCount] = useState(data.data.count)\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        style={{ marginTop: '.5rem' }}\r\n        variant={adding?'info' : \"light\"}\r\n        onClick={handleShow}>\r\n        {adding? 'Добавить' : name}\r\n      </Button>\r\n\r\n      <Modal show={show} onHide={handleClose}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Редактирование</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <InputGroup className=\"mb-3\">\r\n            <InputGroup.Prepend>\r\n              <InputGroup.Text id=\"name\">Наименование</InputGroup.Text>\r\n            </InputGroup.Prepend>\r\n            <FormControl disabled={!adding} value={name} onChange={(e) => setName(e.target.value)} aria-describedby=\"name\" />\r\n          </InputGroup>\r\n          <InputGroup className=\"mb-3\">\r\n            <InputGroup.Prepend>\r\n              <InputGroup.Text id=\"count\">Колличество</InputGroup.Text>\r\n            </InputGroup.Prepend>\r\n            <FormControl type='number' value={count} onChange={(e) => setCount(e.target.value)} aria-describedby=\"count\" />\r\n          </InputGroup>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          {data.id && <Button variant=\"danger\" onClick={handleRemove}>\r\n            Удалить\r\n            </Button>}\r\n          <Button variant=\"secondary\" onClick={handleClose}>\r\n            Закрыть\r\n            </Button>\r\n          <Button variant=\"primary\" onClick={handleSave}>\r\n            Сохранить изменения\r\n            </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\n","import React, { useEffect, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport OneItem from \"./OneItem\";\r\nimport { Badge } from \"react-bootstrap\";\r\nimport { Button, InputGroup, FormControl } from \"react-bootstrap\";\r\nimport MyModal from \"./Modal\";\r\n\r\nconst styles = {\r\n  maimLeft: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    width: '100%'\r\n  },\r\n  tech: {\r\n    marginTop: '.5rem'\r\n  }\r\n};\r\n\r\nfunction Techs({ data, changeTechs, active }) {\r\n  const [item, setItem] = useState(undefined)\r\n\r\n  return (\r\n    <div style={styles.maimLeft}>\r\n\r\n      {data ? data.map((el) => (\r\n        <MyModal\r\n          key={el.id}\r\n          changeData={(act) => changeTechs(act)}\r\n          data={el}>\r\n\r\n        </MyModal>\r\n      )) : null\r\n\r\n      }\r\n      {((!active.id) || (active.parts)) ? null\r\n        :\r\n        <MyModal\r\n          changeData={(act) => changeTechs(act)}\r\n          data={{\r\n            placeId: active.id,\r\n            data: {\r\n              id: undefined,\r\n              name: '',\r\n              count: 1\r\n            }\r\n\r\n          }}\r\n          adding={true}\r\n        >\r\n\r\n        </MyModal>}\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nTechs.propTypes = {};\r\n\r\nexport default Techs;\r\n{/* changeTechs({ type: 'addUnit', obj: { a: 1 } }) */ }\r\n","export default function (state, action) {\r\n\r\n  switch (action.type) {\r\n    case 'addUnit': {\r\n      console.log(state)\r\n      state.push({\r\n        data: {\r\n          count: action.obj.count,\r\n          name: action.obj.name\r\n        },\r\n        placeId: action.obj.placeId\r\n      })\r\n      return state;\r\n    }\r\n    case 'delUnit': {\r\n      \r\n      let arr = state.filter(el => {\r\n        console.log(el.id, action.obj)\r\n        return !(el.id === action.obj)\r\n      }\r\n      );\r\n      return arr\r\n    }\r\n    case 'changeUnit': {\r\n\r\n      console.log(state)\r\n      let arr = state.map(el => {\r\n        if (el.id == action.obj.id) {\r\n          el.data.name = action.obj.name\r\n          el.data.count = action.obj.count\r\n        }\r\n        return el\r\n      })\r\n      return arr\r\n    }\r\n    case 'init':\r\n\r\n      return action.data;\r\n\r\n    default:\r\n      return state\r\n  }\r\n}","// import logo from \"./logo.svg\";\r\nimport React, { useEffect, useState, useReducer } from \"react\";\r\nimport \"./App.css\";\r\nimport firebase from \"./firebase\";\r\nimport ItemsList from \"./components/ItemsList\";\r\nimport Loader from \"./components/Loader\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport Context from \"./context\";\r\nimport Techs from \"./components/Techs\";\r\nimport reducer from './reducer'\r\nfunction App() {\r\n\r\n\r\n\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [nodes, setNodes] = useState([]);\r\n  const [costilRender, setCostilRender] = useState(0);\r\n\r\n  const [active, setActive] = useState({});\r\n\r\n\r\n  const [techs, changeTechs] = useReducer(reducer, []);\r\n\r\n  const ActivContext = {\r\n    active: active,\r\n    setActive: (val) => setActive(val),\r\n  };\r\n\r\n\r\n\r\n  function getHeadNodes(nodes) {\r\n    let arr = [];\r\n    nodes.forEach((item) => {\r\n      let f = true;\r\n      nodes.forEach((itemI) => {\r\n        if (itemI.parts !== undefined) {\r\n          itemI.parts.forEach((el) => {\r\n            if (el === item.id) {\r\n              f = false;\r\n            }\r\n          });\r\n        }\r\n      });\r\n      if (f) arr.push(item);\r\n    });\r\n    return arr;\r\n  }\r\n\r\n  function findNodesParts(headNodes, nodes) {\r\n    let arr = headNodes;\r\n    arr.forEach((element, key) => {\r\n      if (element.parts) {\r\n        element.parts.forEach((el, kp) => {\r\n          nodes.forEach((elN) => {\r\n            if (elN.id === el) {\r\n\r\n              let a = [];\r\n              a.push(elN)\r\n              if (elN.parts) {\r\n                a = findNodesParts(a, nodes);\r\n              }\r\n\r\n              arr[key].parts[kp] = a[0];\r\n\r\n            }\r\n          });\r\n        });\r\n      }\r\n    });\r\n    return arr\r\n  }\r\n\r\n  async function getfirebaseHouse() {\r\n    return await firebase.firestore().collection(\"places\").get()\r\n      .then((response) => {\r\n        let docs = response.docs.map((x) => ({\r\n          id: x.id,\r\n          name: x.data().name,\r\n          parts: x.data().parts && x.data().parts.map((part) => part.id),\r\n        }));\r\n        return docs;\r\n      });\r\n  }\r\n  async function getfirebaseTechs() {\r\n    return await firebase.firestore().collection(\"inventory\").get()\r\n      .then(response => {\r\n        let docs = response.docs.map(x => {\r\n          return {\r\n            id: x.id,\r\n            data: x.data(),\r\n            placeId: x.data().place ? x.data().place?.id : undefined\r\n          }\r\n        });\r\n        console.log(docs)\r\n        return docs;\r\n      });\r\n\r\n  }\r\n\r\n  function getActiveTechs(act) {\r\n    if (act.id) {\r\n      let arr = []\r\n      techs.forEach((el) => {\r\n        if (el.placeId == act.id) arr.push(el)\r\n      })\r\n      let arr2 = []\r\n      if (act.parts) {\r\n        act.parts.forEach(elem => {\r\n          arr2 = [...arr2, ...getActiveTechs(elem)]\r\n        })\r\n      }\r\n      return [...arr, ...arr2]\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    //в получаемых данных, в объектах отсутствует параметр указывающий на родителя (parentId или что то похожее),\r\n    //и я решил сначала найти объекты верхнего уровня, написать компонент для объектов\r\n    // и заполнять в зависимости от поля parts родительских компонентов, но есть много различных \r\n    // готовых компонентов \"tree\" и все получают данные в виде вложеного массива, в итоге решил преобразовать полученные данные в \r\n    //древовидный формат (рекурсивная функция findNodesParts())\r\n\r\n\r\n    //!!!!@@@@   насколько я понимаю, данное тестовое задание предлагалось не только мне, и этот кто-то \"запихал\" в БД некорректные объекты!!\r\n\r\n    getfirebaseHouse().then((docs) => {\r\n      let data = getHeadNodes(docs);\r\n      data = findNodesParts(data, docs);\r\n      setNodes(data);\r\n      setLoading(false);\r\n    });\r\n    getfirebaseTechs().then((docs) => {\r\n      changeTechs({ type: 'init', data: docs })\r\n    })\r\n  }, [costilRender]);\r\n\r\n  const handleChT = async (action) => {\r\n    switch (action.type) {\r\n      // case 'addUnit': {\r\n      //   console.log(state)\r\n      //   return [...state, ...action.obj];\r\n      // }\r\n      // case 'delUnit': {\r\n      // let arr = state.filter(el => {\r\n      //   console.log(el.id, action.obj)\r\n      //   return !(el.id === action.obj)\r\n      // }\r\n      // );\r\n      // return arr\r\n      // }\r\n      case 'addUnit': {\r\n        console.log('add')\r\n        await firebase.firestore().collection(\"inventory\").doc().set({\r\n          name: action.obj.name,\r\n          count: action.obj.count,\r\n          place: firebase.firestore().collection(\"places\").doc(action.obj.placeId) // main-101 – id места\r\n        }).then(() => {\r\n          console.info(\"Done\");\r\n          changeTechs(action)\r\n        });\r\n        setCostilRender(prev => (prev + 1))\r\n        return\r\n\r\n      }\r\n      case 'delUnit': {\r\n        await firebase.firestore().collection(\"inventory\").doc(action.obj).delete().then(() => {\r\n          console.info(\"Done\");\r\n          changeTechs(action)\r\n        })\r\n        return\r\n      }\r\n      case 'changeUnit': {\r\n\r\n          //       НЕ РАБОТАЕТ АПИ Firestore (некорректно)!!!!\r\n\r\n        console.log(action.obj.id, '!!!!!!!!!!')\r\n        // await firebase.firestore().collection(\"inventory\").doc(action.obj.id).set({\r\n        //  \r\n        //     count: action.obj.count,\r\n        //    \r\n        //   \r\n        // }).then((res) => {\r\n        //   console.info(\"Done\", res);\r\n        changeTechs(action)\r\n        // }).catch(e => console.log(e));\r\n        return\r\n\r\n      }\r\n    }\r\n\r\n\r\n  }\r\n  return (\r\n    <div className='main'>\r\n      {loading ? (\r\n        <Loader />\r\n      ) : nodes ? (\r\n        <div className='wrapper'>\r\n          <Context.Provider value={ActivContext}>\r\n            <ItemsList data={nodes} />\r\n          </Context.Provider>\r\n        </div>\r\n      ) : (\r\n            <h1>Здания отсутствуют</h1>\r\n          )}\r\n      <div className='wrapper'>\r\n        <Techs data={getActiveTechs(active)} active={active} changeTechs={handleChT} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}